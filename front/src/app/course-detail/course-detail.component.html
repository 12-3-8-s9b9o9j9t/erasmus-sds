<div class="flex flex-col items-center w-full mt-10">
  <div class="flex flex-col w-3/5">
    <div class="flex justify-start pb-5">
      <nav>
        <a [routerLink]="courses_url">
          <button mat-stroked-button>Go back to courses</button>
        </a>
      </nav>
    </div>
    <div class="grid grid-cols-2 w-full" *ngIf="courseLoaded">
      <div class="flex items-start text-3xl">{{course.title}}</div>
      <div class="flex items-end justify-end text-lg">{{course.ECTSpoints}} ECTS points</div>
      <div class="text-lg">Semester : {{course.semester}}</div>
    </div>

    <div class="text-lg mt-10 text-justify">
      {{course.description}}
    </div>

    <div class="flex flex-row mt-10 flex-shrink-0">
      <nav class="text-base text-left underline text-blue-500 w-1/2">
        <a [href]="course.ECTScard" target="_blank" rel="noopener noreferrer">Link to course card</a>
      </nav>
      <div class="w-1/2 flex justify-end" *ngIf="isConnected">
        <div class="flex flex-row text-2xl gap-2 fixed">
          <span class="hover:cursor-pointer hover:text-3xl transition-all" (click)="voteCourse(1)">{{gradeMap[1]}}</span>
          <span class="hover:cursor-pointer hover:text-3xl transition-all" (click)="voteCourse(2)">{{gradeMap[2]}}</span>
          <span class="hover:cursor-pointer hover:text-3xl transition-all" (click)="voteCourse(3)">{{gradeMap[3]}}</span>
          <span class="hover:cursor-pointer hover:text-3xl transition-all" (click)="voteCourse(4)">{{gradeMap[4]}}</span>
        </div>
      </div>
    </div>


    <div class="mt-3 content-center">
      <hr class="border-gray-600 border-2 mt-5">
    </div>

    <div class="text-xl mt-8">
      Comments
    </div>

    <form *ngIf="isConnected" class="mt-3 mb-6" (submit)="sendComment()" [formGroup]="commentForm">
      <mat-form-field class="w-full">
        <mat-label>Enter your comment</mat-label>
        <textarea matInput type="text" formControlName="comment" class="h-24"></textarea>
      </mat-form-field>
      <br>

      <button mat-raised-button color="primary" type="submit" [disabled]="commentForm.invalid">
        Send comment
      </button>
    </form>

    <mat-divider></mat-divider>

    <div *ngIf="commentsLoaded">
      <div class="flex flex-col" *ngFor="let comment of comments">
        <div class="my-6 flex flex-row">
          <div class="text-lg max-w-12">{{comment.name}}</div>
          <div class="text-base text-justify ml-32 pt-1">{{comment.content}}</div>
        </div>
        <mat-divider></mat-divider>
      </div>
    </div>

  </div>
</div>